
[2026-02-19 17:08:54.482208] QUESTION: what courses are available in SREC?
SQL: Error: 'AIService' object has no attribute '_is_sql_truncated'
ERROR: Query rejected: Only SELECT queries are allowed. Destructive operations (INSERT, UPDATE, DELETE, DROP) are not permitted.

[2026-02-19 17:21:50.711092] QUESTION: how many active users are there?
SQL: SELECT COUNT(DISTINCT u.id) AS active_user_count
FROM users u
INNER JOIN user_login_activities ula ON u.id = ula.user_id
WHERE u.status = 1
  AND ula.login_time >= DATE_SUB(NOW(), INTERVAL 30 DAY)
LIMIT 1;
ERROR: An error occurred while executing the query. Please try a simpler question.

[2026-02-19 17:22:20.716856] QUESTION: how many actice users are there?
SQL: SELECT COUNT(DISTINCT u.id) AS active_users_count
FROM users u
INNER JOIN user_login_activities ula ON u.id = ula.user_id
WHERE ula.login_time >= DATE_SUB(NOW(), INTERVAL 30 DAY)
  AND u.status = 1
LIMIT 1;
ERROR: An error occurred while executing the query. Please try a simpler question.

[2026-02-19 17:27:14.196231] QUESTION: how many students under this course 'CST001 - Ai For Cybersecurity'?
SQL: SELECT COUNT(DISTINCT uce.user_id) AS student_count
FROM user_course_enrollments uce
INNER JOIN courses c ON uce.course_allocation_id = c.id
WHERE (c.course_code = 'CST001' OR c.course_name LIKE '%Ai For Cybersecurity%')
  AND uce.status = 1
LIMIT 1;
ERROR: An error occurred while executing the query. Please try a simpler question.

[2026-02-19 17:32:07.767495] QUESTION: what are the courses in MCET?
SQL: SELECT DISTINCT c.course_code, c.course_name, c.course_type, c.description
FROM courses c
INNER JOIN course_academic_maps cam ON c.id = cam.course_id
INNER JOIN colleges col ON cam.college_id = col.id
WHERE col.college_short_name = 'MCET'
  AND c.status = 1
ORDER BY c.course_name
LIMIT 100;
ERROR: An error occurred while executing the query. Please try a simpler question.

[2026-02-19 17:56:58.735748] QUESTION: whom can crack the ZOHO interveiw in srec? 
SQL: SELECT DISTINCT 
    u.id AS user_id,
    u.name AS student_name,
    u.email,
    u.contact_number,
    ua.college_id,
    c.college_name,
    ua.department_id,
    d.department_name,
    ua.batch_id,
    b.batch_name,
    ua.section_id,
    s.section_name,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) AS cgpa,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) AS current_backlogs,
    COALESCE(coding_agg.total_coding_score, 0) AS total_coding_score,
    COALESCE(coding_agg.avg_coding_mark_percentage, 0) AS avg_coding_mark_percentage,
    COALESCE(mcq_agg.total_mcq_score, 0) AS total_mcq_score,
    COALESCE(mcq_agg.avg_mcq_mark_percentage, 0) AS avg_mcq_mark_percentage,
    CASE 
        WHEN CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) >= 7.5 
             AND CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) = 0 
             AND COALESCE(coding_agg.avg_coding_mark_percentage, 0) >= 70 
             AND COALESCE(mcq_agg.avg_mcq_mark_percentage, 0) >= 70 
        THEN 'Highly Likely'
        WHEN CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) >= 7.0 
             AND CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) <= 1 
             AND COALESCE(coding_agg.avg_coding_mark_percentage, 0) >= 60 
             AND COALESCE(mcq_agg.avg_mcq_mark_percentage, 0) >= 60 
        THEN 'Moderately Likely'
        ELSE 'Needs Improvement'
    END AS zoho_interview_readiness
FROM users u
INNER JOIN user_academics ua ON u.id = ua.user_id AND ua.status = 1
INNER JOIN colleges c ON ua.college_id = c.id AND c.college_short_name = 'srec'
INNER JOIN departments d ON ua.department_id = d.id
INNER JOIN batches b ON ua.batch_id = b.id
INNER JOIN sections s ON ua.section_id = s.id
LEFT JOIN (
    SELECT 
        user_id,
        SUM(mark) AS total_coding_score,
        AVG((mark / NULLIF(total_mark, 0)) * 100) AS avg_coding_mark_percentage
    FROM srec_2026_1_coding_result
    WHERE solve_status = 2
    GROUP BY user_id
) coding_agg ON u.id = coding_agg.user_id
LEFT JOIN (
    SELECT 
        user_id,
        SUM(mark) AS total_mcq_score,
        AVG((mark / NULLIF(total_mark, 0)) * 100) AS avg_mcq_mark_percentage
    FROM srec_2026_1_mcq_result
    WHERE solve_status = 2
    GROUP BY user_id
) mcq_agg ON u.id = mcq_agg.user_id
WHERE u.role = 7 
    AND u.status = 1
    AND ua.status = 1
ORDER BY 
    CASE 
        WHEN CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) >= 7.5 
             AND CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) = 0 
             AND COALESCE(coding_agg.avg_coding_mark_percentage, 0) >= 70 
             AND COALESCE(mcq_agg.avg_mcq_mark_percentage, 0) >= 70 
        THEN 1
        WHEN CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) >= 7.0 
             AND CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) <= 1 
             AND COALESCE(coding_agg.avg_coding_mark_percentage, 0) >= 60 
             AND COALESCE(mcq_agg.avg_mcq_mark_percentage, 0) >= 60 
        THEN 2
        ELSE 3
    END,
    cgpa DESC,
    avg_coding_mark_percentage DESC,
    avg_mcq_mark_percentage DESC
LIMIT 100;
ERROR: An error occurred while executing the query. Please try a simpler question.

[2026-02-19 18:08:16.249245] QUESTION: which students have high problem-solving ability but low attendance â€” potential risk? 
SQL: SELECT 
    u.id AS student_id,
    u.name AS student_name,
    u.email,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) AS cgpa,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) AS backlogs,
    COALESCE(att_2025.attended_count, 0) + COALESCE(att_2026.attended_count, 0) AS total_attended,
    COALESCE(att_2025.solved_count, 0) + COALESCE(att_2026.solved_count, 0) AS total_solved,
    COALESCE(coding_agg.avg_mark_pct, 0) AS avg_mark_percentage,
    COALESCE(coding_agg.total_solved_questions, 0) AS total_solved_questions,
    CASE 
        WHEN COALESCE(att_2025.attended_count, 0) + COALESCE(att_2026.attended_count, 0) < 10 
             AND COALESCE(coding_agg.avg_mark_pct, 0) > 70 
        THEN 'High Risk: High skill, Very Low Attendance'
        WHEN COALESCE(att_2025.attended_count, 0) + COALESCE(att_2026.attended_count, 0) < 20 
             AND COALESCE(coding_agg.avg_mark_pct, 0) > 60 
        THEN 'Medium Risk: Good skill, Low Attendance'
        WHEN COALESCE(att_2025.attended_count, 0) + COALESCE(att_2026.attended_count, 0) < 30 
             AND COALESCE(coding_agg.avg_mark_pct, 0) > 50 
        THEN 'Low Risk: Moderate skill, Below Average Attendance'
        ELSE 'Normal'
    END AS risk_level,
    CASE 
        WHEN COALESCE(att_2025.attended_count, 0) + COALESCE(att_2026.attended_count, 0) < 10 
             AND COALESCE(coding_agg.avg_mark_pct, 0) > 70 
        THEN 1
        WHEN COALESCE(att_2025.attended_count, 0) + COALESCE(att_2026.attended_count, 0) < 20 
             AND COALESCE(coding_agg.avg_mark_pct, 0) > 60 
        THEN 2
        WHEN COALESCE(att_2025.attended_count, 0) + COALESCE(att_2026.attended_count, 0) < 30 
             AND COALESCE(coding_agg.avg_mark_pct, 0) > 50 
        THEN 3
        ELSE 4
    END AS risk_priority
FROM users u
INNER JOIN user_academics ua ON ua.user_id = u.id
INNER JOIN colleges c ON c.id = ua.college_id
LEFT JOIN departments d ON d.id = ua.department_id
LEFT JOIN batches b ON b.id = ua.batch_id
LEFT JOIN sections s ON s.id = ua.section_id
LEFT JOIN (
    SELECT 
        user_id,
        SUM(attended_count) AS attended_count,
        SUM(solved_count) AS solved_count
    FROM (
        SELECT 
            user_id,
            JSON_UNQUOTE(JSON_EXTRACT(attended_count_details, '$.total')) AS attended_count,
            JSON_UNQUOTE(JSON_EXTRACT(solved_count_details, '$.total')) AS solved_count
        FROM `2025_submission_tracks`
        WHERE type = 1
        UNION ALL
        SELECT 
            user_id,
            JSON_UNQUOTE(JSON_EXTRACT(attended_count_details, '$.total')) AS attended_count,
            JSON_UNQUOTE(JSON_EXTRACT(solved_count_details, '$.total')) AS solved_count
        FROM `2026_submission_tracks`
        WHERE type = 1
    ) combined
    GROUP BY user_id
) attendance_summary ON attendance_summary.user_id = u.id
LEFT JOIN (
    SELECT 
        user_id,
        COUNT(*) AS total_solved_questions,
        ROUND(AVG((mark / NULLIF(total_mark, 0)) * 100), 2) AS avg_mark_pct
    FROM (
        SELECT user_id, mark, total_mark FROM srec_2025_2_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM srec_2026_1_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM skcet_2026_1_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM mcet_2025_2_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM mcet_2026_1_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM dotlab_2025_2_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM dotlab_2026_1_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM demolab_2025_2_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM demolab_2026_1_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM skct_2025_2_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM ciet_2026_1_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM niet_2026_1_coding_result WHERE solve_status = 2
        UNION ALL
        SELECT user_id, mark, total_mark FROM mec_2026_1_coding_result WHERE solve_status = 2
    ) all_coding
    GROUP BY user_id
) coding_agg ON coding_agg.user_id = u.id
WHERE u.role = 7
    AND u.status = 1
    AND (
        (COALESCE(attendance_summary.attended_count, 0) < 30 AND COALESCE(coding_agg.avg_mark_pct, 0) > 50)
        OR (COALESCE(attendance_summary.attended_count, 0) < 20 AND COALESCE(coding_agg.avg_mark_pct, 0) > 60)
        OR (COALESCE(attendance_summary.attended_count, 0) < 10 AND COALESCE(coding_agg.avg_mark_pct, 0) > 70)
    )
ORDER BY risk_priority ASC, avg_mark_percentage DESC, total_attended ASC
LIMIT 100;
ERROR: An error occurred while executing the query. Please try a simpler question.

[2026-02-20 09:32:38.767106] QUESTION: who is the top 5 perfromer in java programming?
SQL: SELECT 
    u.id,
    u.name,
    u.email,
    u.contact_number,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) AS cgpa,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) AS backlogs,
    COALESCE(SUM(cr.mark), 0) AS total_java_score,
    COALESCE(SUM(cr.total_mark), 0) AS total_possible_java_score,
    CASE 
        WHEN COALESCE(SUM(cr.total_mark), 0) > 0 
        THEN ROUND((COALESCE(SUM(cr.mark), 0) / COALESCE(SUM(cr.total_mark), 0)) * 100, 2)
        ELSE 0 
    END AS java_percentage
FROM users u
INNER JOIN user_academics ua ON ua.user_id = u.id
INNER JOIN colleges c ON c.id = ua.college_id
LEFT JOIN departments d ON d.id = ua.department_id
LEFT JOIN batches b ON b.id = ua.batch_id
LEFT JOIN sections s ON s.id = ua.section_id
LEFT JOIN (
    SELECT 
        cr.user_id,
        cr.mark,
        cr.total_mark
    FROM srec_2025_2_coding_result cr
    INNER JOIN tests t ON t.id = cr.topic_test_id
    INNER JOIN test_question_maps tqm ON tqm.test_id = t.id AND tqm.question_id = cr.question_id
    INNER JOIN standard_qb_codings sqc ON sqc.id = tqm.question_id
    WHERE cr.topic_type = 1 
        AND cr.solve_status = 2
        AND sqc.l_id = 1
        AND t.testName LIKE '%Java%'
    
    UNION ALL
    
    SELECT 
        cr.user_id,
        cr.mark,
        cr.total_mark
    FROM srec_2026_1_coding_result cr
    INNER JOIN tests t ON t.id = cr.topic_test_id
    INNER JOIN test_question_maps tqm ON tqm.test_id = t.id AND tqm.question_id = cr.question_id
    INNER JOIN standard_qb_codings sqc ON sqc.id = tqm.question_id
    WHERE cr.topic_type = 1 
        AND cr.solve_status = 2
        AND sqc.l_id = 1
        AND t.testName LIKE '%Java%'
    
    UNION ALL
    
    SELECT 
        cr.user_id,
        cr.mark,
        cr.total_mark
    FROM skcet_2026_1_coding_result cr
    INNER JOIN tests t ON t.id = cr.topic_test_id
    INNER JOIN test_question_maps tqm ON tqm.test_id = t.id AND tqm.question_id = cr.question_id
    INNER JOIN standard_qb_codings sqc ON sqc.id = tqm.question_id
    WHERE cr.topic_type = 1 
        AND cr.solve_status = 2
        AND sqc.l_id = 1
        AND t.testName LIKE '%Java%'
    
    UNION ALL
    
    SELECT 
        cr.user_id,
        cr.mark,
        cr.total_mark
    FROM skct_2025_2_coding_result cr
    INNER JOIN tests t ON t.id = cr.topic_test_id
    INNER JOIN test_question_maps tqm ON tqm.test_id = t.id AND tqm.question_id = cr.question_id
    INNER JOIN standard_qb_codings sqc ON sqc.id = tqm.question_id
    WHERE cr.topic_type = 1 
        AND cr.solve_status = 2
        AND sqc.l_id = 1
        AND t.testName LIKE '%Java%'
    
    UNION ALL
    
    SELECT 
        cr.user_id,
        cr.mark,
        cr.total_mark
    FROM skacas_2025_2_coding_result cr
    INNER JOIN tests t ON t.id = cr.topic_test_id
    INNER JOIN test_question_maps tqm ON tqm.test_id = t.id AND tqm.question_id = cr.question_id
    INNER JOIN standard_qb_codings sqc ON sqc.id = tqm.question_id
    WHERE cr.topic_type = 1 
        AND cr.solve_status = 2
        AND sqc.l_id = 1
        AND t.testName LIKE '%Java%'
) cr ON cr.user_id = u.id
WHERE u.role = 7 
    AND u.status = 1
    AND ua.status = 1
GROUP BY 
    u.id,
    u.name,
    u.email,
    u.contact_number,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name,
    cgpa,
    backlogs
ORDER BY 
    java_percentage DESC,
    total_java_score DESC,
    cgpa DESC
LIMIT 5;
ERROR: Query error: GROUP BY clause is incomplete. When using aggregate functions (SUM, COUNT, AVG), all non-aggregated columns must appear in the GROUP BY clause.

[2026-02-20 09:46:28.691570] QUESTION: who is the top 5 perfromer in java programming?
SQL: Error: 'Settings' object has no attribute 'AI_MAX_OUTPUT_TOKENS'
ERROR: Query rejected: Only SELECT queries are allowed. Destructive operations (INSERT, UPDATE, DELETE, DROP) are not permitted.

[2026-02-20 09:47:03.737056] QUESTION: who is the top 5 perfromer in java programming?
SQL: Error: 'Settings' object has no attribute 'AI_MAX_OUTPUT_TOKENS'
ERROR: Query rejected: Only SELECT queries are allowed. Destructive operations (INSERT, UPDATE, DELETE, DROP) are not permitted.

[2026-02-20 12:07:29.848721] QUESTION: who can crack the zoho intervewi in srec fro software developer role?
SQL: Error: name 'prompt' is not defined
ERROR: Query rejected: Only SELECT queries are allowed. Destructive operations (INSERT, UPDATE, DELETE, DROP) are not permitted.

[2026-02-20 12:09:37.259117] QUESTION: who can crack the zoho intervewi in srec fro software developer role?
SQL: Error: name 'prompt' is not defined
ERROR: Query rejected: Only SELECT queries are allowed. Destructive operations (INSERT, UPDATE, DELETE, DROP) are not permitted.

[2026-02-20 12:10:36.110767] QUESTION: who is the top perfomer in srec?
SQL: Error: name 'prompt' is not defined
ERROR: Query rejected: Only SELECT queries are allowed. Destructive operations (INSERT, UPDATE, DELETE, DROP) are not permitted.

[2026-02-23 10:23:26.100706] QUESTION: who are top perfromer in skcet?
SQL: SELECT 
    u.id,
    u.name,
    u.email,
    u.roll_no,
    d.department_name,
    b.batch_name,
    s.section_name,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.ug')) AS DECIMAL(3,2)) AS cgpa,
    CAST(JSON_UNQUOTE(JSON_EXTRACT(ua.academic_info, '$.current_backlogs')) AS UNSIGNED) AS backlogs,
    COALESCE(SUM(cr.mark), 0) + COALESCE(SUM(mr.mark), 0) AS total_score,
    COALESCE(SUM(cr.total_mark), 0) + COALESCE(SUM(mr.total_mark), 0) AS total_possible,
    CASE 
        WHEN COALESCE(SUM(cr.total_mark), 0) + COALESCE(SUM(mr.total_mark), 0) > 0 
        THEN ROUND(((COALESCE(SUM(cr.mark), 0) + COALESCE(SUM(mr.mark), 0)) / (COALESCE(SUM(cr.total_mark), 0) + COALESCE(SUM(mr.total_mark), 0))) * 100, 2)
        ELSE 0 
    END AS percentage
FROM users u
INNER JOIN user_academics ua ON ua.user_id = u.id
INNER JOIN colleges c ON c.id = ua.college_id
LEFT JOIN departments d ON d.id = ua.department_id
LEFT JOIN batches b ON b.id = ua.batch_id
LEFT JOIN sections s ON s.id = ua.section_id
LEFT JOIN skcet_2026_1_coding_result cr ON cr.user_id = u.id AND cr.solve_status = 2
LEFT JOIN skcet_2026_1_mcq_result mr ON mr.user_id = u.id AND mr.solve_status = 2
WHERE u.role = 7
    AND u.status = 1
    AND c.college_short_name = 'skcet'
GROUP BY 
    u.id,
    u.name,
    u.email,
    u.roll_no,
    d.department_name,
    b.batch_name,
    s.section_name,
    cgpa,
    backlogs
ORDER BY total_score DESC, percentage DESC, cgpa DESC
LIMIT 10;
ERROR: Query error: GROUP BY clause is incomplete. When using aggregate functions (SUM, COUNT, AVG), all non-aggregated columns must appear in the GROUP BY clause.

[2026-02-23 11:34:42.922470] QUESTION: what are the improvement i need to develope my commpany
SQL: SELECT 
    f.type AS feedback_type,
    f.feedback AS improvement_suggestion,
    COUNT(*) AS suggestion_count,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name,
    AVG(CASE 
        WHEN cr.mark IS NOT NULL AND cr.total_mark > 0 
        THEN (cr.mark / cr.total_mark) * 100 
        ELSE NULL 
    END) AS avg_performance_percentage,
    COUNT(DISTINCT cr.user_id) AS students_with_performance_data,
    COUNT(DISTINCT f.user_id) AS students_providing_feedback,
    GROUP_CONCAT(DISTINCT f.feedback ORDER BY f.created_at DESC LIMIT 5) AS recent_suggestions
FROM portal_feedback f
LEFT JOIN users u ON f.user_id = u.id
LEFT JOIN user_academics ua ON u.id = ua.user_id
LEFT JOIN colleges c ON ua.college_id = c.id
LEFT JOIN departments d ON ua.department_id = d.id
LEFT JOIN batches b ON ua.batch_id = b.id
LEFT JOIN sections s ON ua.section_id = s.id
LEFT JOIN (
    SELECT user_id, mark, total_mark 
    FROM srec_2025_2_coding_result 
    WHERE solve_status = 2
    UNION ALL
    SELECT user_id, mark, total_mark 
    FROM srec_2026_1_coding_result 
    WHERE solve_status = 2
    UNION ALL
    SELECT user_id, mark, total_mark 
    FROM skcet_2026_1_coding_result 
    WHERE solve_status = 2
    UNION ALL
    SELECT user_id, mark, total_mark 
    FROM niet_2026_1_coding_result 
    WHERE solve_status = 2
    UNION ALL
    SELECT user_id, mark, total_mark 
    FROM ciet_2026_1_coding_result 
    WHERE solve_status = 2
) cr ON u.id = cr.user_id
WHERE f.feedback IS NOT NULL 
    AND f.feedback != ''
    AND f.status = 1
    AND u.status = 1
    AND u.role = 7
GROUP BY 
    f.type,
    f.feedback,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name
ORDER BY 
    suggestion_count DESC,
    avg_performance_percentage ASC
LIMIT 100;
ERROR: SQL syntax error: Check query formatting. Ensure all keywords have proper spacing (e.g., 'FROM table INNER JOIN' not 'FROM tableINNER'). Check that all parentheses, quotes, and commas are balanced.

[2026-02-23 11:49:12.332423] QUESTION: what are the improvement i need to develope my commpany
SQL: SELECT 
    'FEEDBACK_ANALYSIS' AS analysis_area,
    fq.question AS feedback_category,
    pf.feedback AS user_feedback,
    COUNT(*) AS feedback_count,
    u.name AS user_name,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name
FROM portal_feedback pf
JOIN feedback_questions fq ON pf.question_id = fq.id
JOIN users u ON pf.user_id = u.id
LEFT JOIN user_academics ua ON u.id = ua.user_id
LEFT JOIN colleges c ON ua.college_id = c.id
LEFT JOIN departments d ON ua.department_id = d.id
LEFT JOIN batches b ON ua.batch_id = b.id
LEFT JOIN sections s ON ua.section_id = s.id
WHERE pf.status = 1
GROUP BY fq.question, pf.feedback, u.name, c.college_name, d.department_name, b.batch_name, s.section_name
UNION ALL
SELECT 
    'PERFORMANCE_WEAK_AREAS' AS analysis_area,
    CONCAT(c.college_short_name, ' - ', 
           CASE 
               WHEN cr.topic_type = 0 THEN 'Practice' 
               WHEN cr.topic_type = 1 THEN 'Assessment' 
               ELSE 'Other' 
           END) AS performance_category,
    'Low scoring questions' AS issue_description,
    COUNT(*) AS issue_count,
    NULL AS user_name,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name
FROM (
    SELECT 'srec_2025_2' AS college_db, user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM srec_2025_2_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'srec_2026_1', user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM srec_2026_1_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'skcet_2026_1', user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM skcet_2026_1_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'mcet_2025_2', user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM mcet_2025_2_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'mcet_2026_1', user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM mcet_2026_1_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'niet_2026_1', user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM niet_2026_1_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'ciet_2026_1', user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM ciet_2026_1_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'b2c', user_id, topic_test_id, question_id, topic_type, mark, total_mark FROM b2c_coding_result WHERE solve_status IN (0,1,2,3)
) cr
JOIN users u ON cr.user_id = u.id
LEFT JOIN user_academics ua ON u.id = ua.user_id
LEFT JOIN colleges c ON ua.college_id = c.id
LEFT JOIN departments d ON ua.department_id = d.id
LEFT JOIN batches b ON ua.batch_id = b.id
LEFT JOIN sections s ON ua.section_id = s.id
WHERE cr.mark < cr.total_mark * 0.5
GROUP BY c.college_short_name, cr.topic_type, c.college_name, d.department_name, b.batch_name, s.section_name
UNION ALL
SELECT 
    'ENGAGEMENT_METRICS' AS analysis_area,
    CASE 
        WHEN st.mode = 1 THEN 'MCQ_Submission'
        WHEN st.mode = 2 THEN 'Coding_Submission'
        WHEN st.mode = 3 THEN 'Mixed_Submission'
        ELSE 'Other'
    END AS engagement_category,
    'Low submission rates' AS issue_description,
    COUNT(*) AS low_engagement_count,
    NULL AS user_name,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name
FROM (
    SELECT user_id, mode, type, period, attended_count_details FROM `2025_submission_tracks`
    UNION ALL SELECT user_id, mode, type, period, attended_count_details FROM `2026_submission_tracks`
) st
JOIN users u ON st.user_id = u.id
LEFT JOIN user_academics ua ON u.id = ua.user_id
LEFT JOIN colleges c ON ua.college_id = c.id
LEFT JOIN departments d ON ua.department_id = d.id
LEFT JOIN batches b ON ua.batch_id = b.id
LEFT JOIN sections s ON ua.section_id = s.id
WHERE JSON_EXTRACT(st.attended_count_details, '$.total') < 5
GROUP BY st.mode, c.college_name, d.department_name, b.batch_name, s.section_name
UNION ALL
SELECT 
    'CONTENT_GAPS' AS analysis_area,
    'Question Bank vs Performance' AS content_category,
    CONCAT('High failure rate: ', sqc.title) AS gap_description,
    COUNT(*) AS gap_count,
    NULL AS user_name,
    c.college_name,
    d.department_name,
    b.batch_name,
    s.section_name
FROM (
    SELECT 'srec_2025_2' AS college_db, user_id, topic_test_id, question_id, mark, total_mark FROM srec_2025_2_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'srec_2026_1', user_id, topic_test_id, question_id, mark, total_mark FROM srec_2026_1_coding_result WHERE solve_status IN (0,1,2,3)
    UNION ALL SELECT 'skcet_2026_1', user_id, topic_test_id, question_id, mark, total_mark FROM skcet_2026_1_coding_result WHERE solve_status IN (0,1,2,3)
) cr
JOIN tests t ON cr.topic_test_id = t.id
JOIN test_question_maps tqm ON t.id = tqm.test_id AND cr.question_id = tqm.question_id
JOIN standard_qb_codings sqc ON tqm.question_id = sqc.id
JOIN users u ON cr.user_id = u.id
LEFT JOIN user_academics ua ON u.id = ua.user_id
LEFT JOIN colleges c ON ua.college_id = c.id
LEFT JOIN departments d ON ua.department_id = d.id
LEFT JOIN batches b ON ua.batch_id = b.id
LEFT JOIN sections s ON ua.section_id = s.id
WHERE cr.mark < cr.total_mark * 0.3
GROUP BY sqc.title, c.college_name, d.department_name, b.batch_name, s.section_name
ORDER BY analysis_area, feedback_count DESC, issue_count DESC, low_engagement_count DESC, gap_count DESC
LIMIT 100;
ERROR: An error occurred while executing the query. Please try a simpler question.

[2026-02-23 11:58:39.653485] QUESTION: what are the improvement i need to develope my commpany
SQL: SELECT 
    'FEEDBACK_ANALYSIS' AS category,
    fq.question AS area,
    COUNT(pf.id) AS feedback_count,
    ROUND(AVG(CASE WHEN pf.feedback REGEXP '^[0-9]+$' THEN CAST(pf.feedback AS UNSIGNED) ELSE NULL END), 2) AS avg_rating
FROM portal_feedback pf
JOIN feedback_questions fq ON pf.question_id = fq.id
WHERE pf.type = 1
GROUP BY fq.question
UNION ALL
SELECT 
    'TRAINER_FEEDBACK' AS category,
    fq.question AS area,
    COUNT(stf.id) AS feedback_count,
    ROUND(AVG(CASE WHEN stf.feedback REGEXP '^[0-9]+$' THEN CAST(stf.feedback AS UNSIGNED) ELSE NULL END), 2) AS avg_rating
FROM staff_trainer_feedback stf
JOIN feedback_questions fq ON stf.question_id = fq.id
WHERE stf.type = 1
GROUP BY fq.question
UNION ALL
SELECT 
    'STUDENT_PERFORMANCE' AS category,
    CASE 
        WHEN cr.complexity = 1 THEN 'Easy_Coding'
        WHEN cr.complexity = 2 THEN 'Medium_Coding'
        WHEN cr.complexity = 3 THEN 'Hard_Coding'
        ELSE 'Unknown_Difficulty'
    END AS area,
    COUNT(DISTINCT cr.user_id) AS student_count,
    ROUND(AVG(CASE WHEN cr.total_mark > 0 THEN (cr.mark / cr.total_mark) * 100 ELSE 0 END), 2) AS avg_score_percentage
FROM (
    SELECT user_id, complexity, mark, total_mark FROM srec_2025_2_coding_result WHERE solve_status IN (2, 3)
    UNION ALL SELECT user_id, complexity, mark, total_mark FROM srec_2026_1_coding_result WHERE solve_status IN (2, 3)
    UNION ALL SELECT user_id, complexity, mark, total_mark FROM skcet_2026_1_coding_result WHERE solve_status IN (2, 3)
    UNION ALL SELECT user_id, complexity, mark, total_mark FROM mcet_2025_2_coding_result WHERE solve_status IN (2, 3)
    UNION ALL SELECT user_id, complexity, mark, total_mark FROM mcet_2026_1_coding_result WHERE solve_status IN (2, 3)
    UNION ALL SELECT user_id, complexity, mark, total_mark FROM niet_2026_1_coding_result WHERE solve_status IN (2, 3)
    UNION ALL SELECT user_id, complexity, mark, total_mark FROM ciet_2026_1_coding_result WHERE solve_status IN (2, 3)
) cr
GROUP BY CASE 
    WHEN cr.complexity = 1 THEN 'Easy_Coding'
    WHEN cr.complexity = 2 THEN 'Medium_Coding'
    WHEN cr.complexity = 3 THEN 'Hard_Coding'
    ELSE 'Unknown_Difficulty'
END
UNION ALL
SELECT 
    'ENGAGEMENT_METRICS' AS category,
    CASE 
        WHEN st.mode = 1 THEN 'MCQ_Assignments'
        WHEN st.mode = 2 THEN 'Coding_Assignments'
        WHEN st.mode = 3 THEN 'Project_Assignments'
        ELSE 'Other_Activities'
    END AS area,
    COUNT(DISTINCT st.user_id) AS active_users,
    ROUND(AVG(JSON_UNQUOTE(JSON_EXTRACT(st.solved_count_details, '$.count'))), 2) AS avg_solved_count
FROM (
    SELECT user_id, mode, solved_count_details FROM `2025_submission_tracks`
    UNION ALL SELECT user_id, mode, solved_count_details FROM `2026_submission_tracks`
) st
WHERE st.solved_count_details IS NOT NULL
GROUP BY CASE 
    WHEN st.mode = 1 THEN 'MCQ_Assignments'
    WHEN st.mode = 2 THEN 'Coding_Assignments'
    WHEN st.mode = 3 THEN 'Project_Assignments'
    ELSE 'Other_Activities'
END
UNION ALL
SELECT 
    'COURSE_COMPLETION' AS category,
    c.course_name AS area,
    COUNT(DISTINCT uce.user_id) AS enrolled_students,
    ROUND(100.0 * COUNT(DISTINCT CASE WHEN cws.progress >= 70 THEN uce.user_id END) / COUNT(DISTINCT uce.user_id), 2) AS completion_rate_percentage
FROM user_course_enrollments uce
JOIN courses c ON uce.course_id = c.id
LEFT JOIN course_wise_segregations cws ON uce.course_id = cws.course_id AND uce.user_id = cws.user_id
WHERE uce.status = 1 AND c.status = 1
GROUP BY c.course_name
HAVING COUNT(DISTINCT uce.user_id) > 0
UNION ALL
SELECT 
    'KNOWLEDGE_GAPS' AS category,
    sqc.complexity_type AS area,
    COUNT(DISTINCT cr.question_id) AS question_attempts,
    ROUND(100.0 * COUNT(DISTINCT CASE WHEN cr.mark < cr.total_mark * 0.5 THEN cr.question_id END) / COUNT(DISTINCT cr.question_id), 2) AS weak_performance_percentage
FROM (
    SELECT question_id, mark, total_mark FROM srec_2025_2_coding_result
    UNION ALL SELECT question_id, mark, total_mark FROM srec_2026_1_coding_result
    UNION ALL SELECT question_id, mark, total_mark FROM skcet_2026_1_coding_result
) cr
JOIN standard_qb_codings sqc ON cr.question_id = sqc.id
WHERE cr.total_mark > 0
GROUP BY sqc.complexity_type
ORDER BY category, feedback_count DESC
LIMIT 100;
ERROR: An error occurred while executing the query. Please try a simpler question.
